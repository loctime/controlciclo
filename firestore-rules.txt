# Reglas de Firestore para ControlCiclo
# Copia y pega estas reglas en Firebase Console > Firestore > Rules

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Reglas para ControlCiclo
    match /apps/controlciclo/users/{userId}/{document=**} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}

# Explicación de las reglas:
# - Solo usuarios autenticados pueden acceder
# - Solo pueden acceder a sus propios datos (userId debe coincidir con el UID del usuario)
# - Aplica a toda la estructura: apps/controlciclo/users/{userId}/...
# - Estructura: 
#   - apps/controlciclo/users/{userId} (documento con userData - 4 segmentos PAR)
#   - apps/controlciclo/users/{userId}/symptomLogs (colección - 5 segmentos IMPAR)
#   - apps/controlciclo/users/{userId}/periodLogs (colección - 5 segmentos IMPAR)
